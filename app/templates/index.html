{% extends "base.html" %}
{% block content %}
<h1>Partite (ultime 50)</h1>

{% for g, entries in game_rows %}
  <div class="card">
    <div class="muted">
      {{ g.played_at }} UTC
      {% if g.winner_player %} — Winner: <b>{{ g.winner_player }}</b>{% endif %}
    </div>

    {% if g.notes %}<div><i>{{ g.notes }}</i></div>{% endif %}

    <ul>
      {% for e in entries %}
        <li><b>{{ e.player }}</b> — {{ e.commander }}</li>
      {% endfor %}
    </ul>

    <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
      <a href="/edit/{{ g.id }}">Modifica</a>

      <form method="post" action="/delete_game" onsubmit="return confirm('Eliminare questa partita?');" style="margin:0;">
        <input type="hidden" name="game_id" value="{{ g.id }}" />
        <button type="submit">Elimina</button>
      </form>
    </div>
  </div>
{% else %}
  <p>Nessuna partita ancora.</p>
{% endfor %}

{% endblock %}
