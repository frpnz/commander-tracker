<!DOCTYPE html>

<html lang="it">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Triplette</title>
<style>body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; max-width: 980px; margin: 24px auto; padding: 0 16px; }
    nav a { margin-right: 12px; }
    textarea { width: 100%; }
    table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    th, td { border-bottom: 1px solid #ddd; padding: 8px; vertical-align: top; }
    .error { background: #ffe8e8; padding: 10px; border: 1px solid #ffb3b3; }
    .card { border: 1px solid #ddd; border-radius: 10px; padding: 12px; margin: 12px 0; }
    .muted { color: #666; }
    .row { display:flex; gap:12px; flex-wrap: wrap; }
    .row > div { flex:1; min-width: 220px; }
    button { cursor:pointer; }</style>
</head>
<body>
<nav><a href="/commander-tracker/">Home</a>
<a href="/commander-tracker/summary/">Summary</a>
<a href="/commander-tracker/triplette/">Info decks</a>
<a href="/commander-tracker/stats/">Statistiche</a>
<a href="/commander-tracker/dashboard_mini/">Dashboard</a>
<a href="/commander-tracker/dashboard_mini_bracket/">Dashboard (Bracket)</a>
<a href="/commander-tracker/player_dashboard/">Player</a>
<a href="/commander-tracker/export.csv">Export CSV</a></nav>
<hr/>
<h1>Triplette</h1>
<p class="muted">Combinazioni Player – Commander – Bracket con numero di partite.</p>
<input id="q" placeholder="Filtra (player/commander/bracket)…"/>
<table>
<thead><tr><th>Player</th><th>Commander</th><th>Bracket</th><th style="text-align:right;"># Partite</th></tr></thead>
<tbody id="tb"></tbody>
</table>
<script>
    const BASE = "/commander-tracker/";
    let data = [];
    function esc(s) {
      return String(s ?? '').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
    }
    function row(r) {
      const br = (r.bracket === null || r.bracket === undefined || r.bracket === '') ? '-' : r.bracket;
      return `<tr><td>${esc(r.player)}</td><td>${esc(r.commander)}</td><td>${esc(br)}</td><td style="text-align:right;">${esc(r.games)}</td></tr>`;
    }
    function render() {
      const q = document.getElementById('q').value.trim().toLowerCase();
      const rows = q ? data.filter(r => (`${r.player} ${r.commander} ${r.bracket ?? ''}`).toLowerCase().includes(q)) : data;
      document.getElementById('tb').innerHTML = rows.map(row).join('');
    }
    fetch(BASE + 'data/triplette.json').then(r => r.json()).then(j => {
      data = j.data || j;
      render();
    });
    document.getElementById('q').addEventListener('input', render);
  </script>
</body>
</html>