<!DOCTYPE html>

<html lang="it">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Player (Confronto)</title>
<style>body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; max-width: 980px; margin: 24px auto; padding: 0 16px; }
    nav a { margin-right: 12px; }
    textarea { width: 100%; }
    table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    th, td { border-bottom: 1px solid #ddd; padding: 8px; vertical-align: top; }
    .error { background: #ffe8e8; padding: 10px; border: 1px solid #ffb3b3; }
    .card { border: 1px solid #ddd; border-radius: 10px; padding: 12px; margin: 12px 0; }
    .muted { color: #666; }
    .row { display:flex; gap:12px; flex-wrap: wrap; }
    .row > div { flex:1; min-width: 220px; }
    button { cursor:pointer; }</style>
</head>
<body>
<nav><a href="/commander-tracker/">Home</a>
<a href="/commander-tracker/summary/">Summary</a>
<a href="/commander-tracker/triplette/">Triplette</a>
<a href="/commander-tracker/stats/">Statistiche</a>
<a href="/commander-tracker/dashboard_mini/">Dashboard</a>
<a href="/commander-tracker/dashboard_mini_bracket/">Dashboard (Bracket)</a>
<a href="/commander-tracker/commander_brackets/">Bracket Commander</a>
<a href="/commander-tracker/player_dashboard/">Player</a>
<a href="/commander-tracker/export.csv">Export CSV</a></nav>
<hr/>
<h1>Confronto Player</h1>
<p class="muted">Seleziona due player per vedere le dashboard affiancate. (Sola lettura)</p>
<div class="card">
<div class="row" style="gap:12px; flex-wrap:wrap; align-items:end;">
<div style="min-width:240px;">
<label>Player A</label><br/>
<select id="a">
<option value="">— scegli —</option>
<option value="Da">Da</option>
<option value="Fra">Fra</option>
<option value="Giamma">Giamma</option>
<option value="Matti">Matti</option>
<option value="Stanca">Stanca</option>
<option value="Teo">Teo</option>
</select>
</div>
<div style="min-width:240px;">
<label>Player B</label><br/>
<select id="b">
<option value="">— scegli —</option>
<option value="Da">Da</option>
<option value="Fra">Fra</option>
<option value="Giamma">Giamma</option>
<option value="Matti">Matti</option>
<option value="Stanca">Stanca</option>
<option value="Teo">Teo</option>
</select>
</div>
<div>
<label>Altezza</label><br/>
<input id="h" min="600" step="100" style="width:120px;" type="number" value="1600"/>
</div>
<div>
<button id="swap" type="button">Scambia</button>
</div>
</div>
</div>
<div class="row" style="gap:12px; flex-wrap:wrap;">
<div class="card" style="flex:1; min-width:360px;">
<h2 style="margin-top:0;">Player A</h2>
<iframe id="fa" style="width:100%; border:1px solid #ddd; border-radius:10px;"></iframe>
</div>
<div class="card" style="flex:1; min-width:360px;">
<h2 style="margin-top:0;">Player B</h2>
<iframe id="fb" style="width:100%; border:1px solid #ddd; border-radius:10px;"></iframe>
</div>
</div>
<script>
    const BASE = "/commander-tracker/";
    const selA = document.getElementById('a');
    const selB = document.getElementById('b');
    const fa = document.getElementById('fa');
    const fb = document.getElementById('fb');
    const h = document.getElementById('h');
    const swap = document.getElementById('swap');

    function playerUrl(slug) {
      return slug ? (BASE + 'player/' + encodeURIComponent(slug) + '/') : '';
    }

    function getParams() {
      const p = new URLSearchParams(window.location.search);
      return { a: p.get('a') || '', b: p.get('b') || '' };
    }

    function setParams(a, b) {
      const p = new URLSearchParams();
      if (a) p.set('a', a);
      if (b) p.set('b', b);
      const qs = p.toString();
      const url = window.location.pathname + (qs ? ('?' + qs) : '');
      history.replaceState(null, '', url);
    }

    function apply() {
      const a = selA.value;
      const b = selB.value;
      fa.src = playerUrl(a);
      fb.src = playerUrl(b);
      const px = parseInt(h.value || '1600', 10);
      fa.style.height = px + 'px';
      fb.style.height = px + 'px';
      setParams(a, b);
    }

    selA.addEventListener('change', apply);
    selB.addEventListener('change', apply);
    h.addEventListener('change', apply);
    swap.addEventListener('click', () => {
      const tmp = selA.value;
      selA.value = selB.value;
      selB.value = tmp;
      apply();
    });

    const init = getParams();
    if (init.a) selA.value = init.a;
    if (init.b) selB.value = init.b;
    apply();
  </script>
</body>
</html>