<!doctype html><html lang='it'><head><meta charset='utf-8'/>
<meta name='viewport' content='width=device-width, initial-scale=1'/>
<title>Confronto Player</title>
<style>
body{font-family:system-ui,Segoe UI,Roboto,sans-serif;max-width:1200px;margin:24px auto;padding:0 16px;}
.top{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin:12px 0 18px;}
select,input,button{padding:10px;font-size:16px;}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;align-items:start;}
@media (max-width: 980px){.grid{grid-template-columns:1fr;}}
iframe{width:100%;border:1px solid #ddd;border-radius:10px;}
.hint{color:#555;margin-top:0;}
</style></head><body>
<h1>Confronto Player</h1>
<p><a href='/commander-tracker/'>← Home</a> &nbsp;|&nbsp; <a href='/commander-tracker/player_dashboard/'>Selettore player</a> &nbsp;|&nbsp; <a href='/commander-tracker/player/'>Lista player</a></p>
<p class='hint'>Seleziona due player per vedere le loro dashboard affiancate. Il confronto usa iframe per evitare conflitti tra grafici.</p>
<div class='top'>
<label for='a'>Player A</label>
<select id='a'><option value=''>— scegli —</option>
<option value='Da'>Da</option>
<option value='Fra'>Fra</option>
<option value='Giamma'>Giamma</option>
<option value='Matti'>Matti</option>
<option value='Stanca'>Stanca</option>
<option value='Teo'>Teo</option>
</select>
<label for='b'>Player B</label>
<select id='b'><option value=''>— scegli —</option>
<option value='Da'>Da</option>
<option value='Fra'>Fra</option>
<option value='Giamma'>Giamma</option>
<option value='Matti'>Matti</option>
<option value='Stanca'>Stanca</option>
<option value='Teo'>Teo</option>
</select>
<label for='h'>Altezza</label>
<input id='h' type='number' min='600' step='100' value='1600' style='width:110px'/>
<button id='swap' type='button'>Scambia</button>
</div>
<div class='grid'>
<div><iframe id='frameA' title='Dashboard A'></iframe></div>
<div><iframe id='frameB' title='Dashboard B'></iframe></div>
</div>
<script>
  const selA = document.getElementById('a');
  const selB = document.getElementById('b');
  const frameA = document.getElementById('frameA');
  const frameB = document.getElementById('frameB');
  const h = document.getElementById('h');
  const swap = document.getElementById('swap');
  function getParams(){
    const p = new URLSearchParams(window.location.search);
    return { a: p.get('a') || '', b: p.get('b') || '' };
  }
  function setParams(a, b){
    const p = new URLSearchParams();
    if (a) p.set('a', a);
    if (b) p.set('b', b);
    const qs = p.toString();
    const url = window.location.pathname + (qs ? ('?' + qs) : '');
    history.replaceState(null, '', url);
  }
  function playerUrl(slug){ return slug ? '/commander-tracker/player/' + encodeURIComponent(slug) + '/' : ''; }
  function apply(){
    const a = selA.value;
    const b = selB.value;
    frameA.src = playerUrl(a);
    frameB.src = playerUrl(b);
    const px = parseInt(h.value || '1600', 10);
    frameA.style.height = px + 'px';
    frameB.style.height = px + 'px';
    setParams(a, b);
  }
  selA.addEventListener('change', apply);
  selB.addEventListener('change', apply);
  h.addEventListener('change', apply);
  swap.addEventListener('click', () => {
    const tmp = selA.value;
    selA.value = selB.value;
    selB.value = tmp;
    apply();
  });
  // init da querystring
  const init = getParams();
  if (init.a) selA.value = init.a;
  if (init.b) selB.value = init.b;
  apply();
</script>
</body></html>